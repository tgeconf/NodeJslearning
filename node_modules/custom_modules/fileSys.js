/**
 * dealing with files 
 */

function FileSys(){
	this.dataContainer = new Array();
	this.objContainer = new Array();
}

/**
 * read by line and 
 */
FileSys.prototype.csv = function(path, callback){
	console.log("reading data");
	var lineReader = require("line-reader");
	var lineNum = 0;
	var attrs = [];
	var tmpContainer = new Array();
	lineReader.eachLine(path, function(line, last){
		if(lineNum == 0){
			attrs = line.split(",");
		} else {
			var d = {};
			var attrValues = line.split(",");
			for(var i = 0 ; i < attrValues.length; i++){
				d[attrs[i]]	= attrValues[i];
			}
			tmpContainer.push(d);
			
		}
		lineNum++;
		if(last){
			callback();
			//return;
		}
	});

	this.dataContainer = tmpContainer;
}

FileSys.prototype.test2 = function(tmpContainer){
		console.log("dsadasdasdsds..............    "  +tmpContainer.length);
		for(var i = 0; i < tmpContainer.length; i++){
			var d = {};
			for(var j = 0; j < attrs.length; j++){
				d[attrs[j]] = tmpContainer[i][attrs[j]];
			}
			this.objContainer.push(d);
		}
		console.log("tttttttttttttttttttttttttttt   " + this.test);
		console.log(this.objContainer.length);

	};

module.exports = FileSys;